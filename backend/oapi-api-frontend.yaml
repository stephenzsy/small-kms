openapi: 3.0.3
info:
  title: Small KMS Admin API
  version: 0.1.1
servers:
  - url: https://example.com
    description: Local server
security:
  - BearerAuth: []
paths:
  /v1/diagnostics:
    $ref: "oapi-base.yaml#/paths/~1v1~1diagnostics"
  /v1/managed-app:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1managed-app"
  /v1/managed-app/{managedAppId}:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1managed-app~1{managedAppId}"
  /v1/system-app/{systemAppName}:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1system-app~1{systemAppName}"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent-config/server:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent-config~1server"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent-config/server/role-assignments:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent-config~1server~1role-assignments"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance/{resourceIdentifier}:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance~1{resourceIdentifier}"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance/{resourceIdentifier}/proxy-auth/token:
    $ref: "oapi-managed-app.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance~1{resourceIdentifier}~1proxy-auth~1token"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance/{resourceIdentifier}/diagnostics:
    $ref: "oapi-agent-push.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance~1{resourceIdentifier}~1diagnostics"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance/{resourceIdentifier}/docker/images:
    $ref: "oapi-agent-push.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance~1{resourceIdentifier}~1docker~1images"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance/{resourceIdentifier}/docker/info:
    $ref: "oapi-agent-push.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance~1{resourceIdentifier}~1docker~1info"
  /v1/{namespaceKind}/{namespaceIdentifier}/agent/instance/{resourceIdentifier}/pull-image:
    $ref: "oapi-agent-push.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1agent~1instance~1{resourceIdentifier}~1pull-image"
  /v1/profile/{profileResourceKind}:
    $ref: "oapi-profile.yaml#/paths/~1v1~1profile~1{profileResourceKind}"
  /v1/profile/{profileResourceKind}/{namespaceIdentifier}:
    $ref: "oapi-profile.yaml#/paths/~1v1~1profile~1{profileResourceKind}~1{namespaceIdentifier}"
  /v1/profile/{profileResourceKind}/{namespaceIdentifier}/import:
    $ref: "oapi-profile.yaml#/paths/~1v1~1profile~1{profileResourceKind}~1{namespaceIdentifier}~1import"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert/{resourceIdentifier}:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert~1{resourceIdentifier}"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert-policy:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert-policy"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert-policy/{resourceIdentifier}:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert-policy~1{resourceIdentifier}"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert-policy/{resourceIdentifier}/create-cert:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert-policy~1{resourceIdentifier}~1create-cert"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert-rule/issuer:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert-rule~1issuer"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert-rule/ms-entra-client-credential:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert-rule~1ms-entra-client-credential"
  /v1/{namespaceKind}/{namespaceIdentifier}/cert-policy/{resourceIdentifier}/keyvault-role-assignments/{resourceCategory}:
    $ref: "oapi-cert.yaml#/paths/~1v1~1{namespaceKind}~1{namespaceIdentifier}~1cert-policy~1{resourceIdentifier}~1keyvault-role-assignments~1{resourceCategory}"
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
